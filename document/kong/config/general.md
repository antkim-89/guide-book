# General

## 기본 설정

| 설정        | 설명                                                                                                                                   | 기본값             |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------- | ------------------ |
| `prefix`    | 작업 디렉토리. Nginx의 prefix 경로와 동일하며, 임시 파일과 로그를 포함합니다. 각 Kong 프로세스는 별도의 작업 디렉토리를 가져야 합니다. | `/usr/local/kong/` |
| `log_level` | Nginx 서버의 로그 레벨. 로그는 `<prefix>/logs/error.log`에서 찾을 수 있습니다.                                                         | `notice`           |

## 프록시 로그 설정

| 설정                      | 설명                                                                                                                                                                                                                                                                    | 기본값                  |
| ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| `proxy_access_log`        | 프록시 포트 요청 액세스 로그의 경로. 프록시 요청 로깅을 비활성화하려면 `off`로 설정하세요. 상대 경로인 경우 prefix 위치 아래에 배치됩니다.                                                                                                                              | `logs/access.log`       |
| `proxy_error_log`         | 프록시 포트 요청 오류 로그의 경로. 이 로그의 세분성은 `log_level` 속성으로 조정됩니다.                                                                                                                                                                                  | `logs/error.log`        |
| `proxy_stream_access_log` | TCP 스트림 프록시 포트 액세스 로그의 경로. 프록시 요청 로깅을 비활성화하려면 `off`로 설정하세요. 상대 경로인 경우 prefix 위치 아래에 배치됩니다. basic은 `'$remote_addr [$time_local] ' '$protocol $status $bytes_sent $bytes_received ' '$session_time'`로 정의됩니다. | `logs/access.log basic` |
| `proxy_stream_error_log`  | TCP 스트림 프록시 포트 요청 오류 로그의 경로. 이 로그의 세분성은 `log_level` 속성으로 조정됩니다.                                                                                                                                                                       | `logs/error.log`        |

## API 로그 설정

| 설정                | 설명                                                                                                                                                                                                                                                  | 기본값                  |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| `admin_access_log`  | Admin API 요청 액세스 로그의 경로. 하이브리드 모드가 활성화되고 현재 노드가 제어 평면으로 설정된 경우, 데이터 평면의 연결 요청도 "kong_cluster_listener" 서버 이름으로 이 파일에 기록됩니다. Admin API 요청 로깅을 비활성화하려면 `off`로 설정하세요. | `logs/admin_access.log` |
| `admin_error_log`   | Admin API 요청 오류 로그의 경로. 이 로그의 세분성은 `log_level` 속성으로 조정됩니다.                                                                                                                                                                  | `logs/error.log`        |
| `status_access_log` | Status API 요청 액세스 로그의 경로. 기본값 `off`는 이 API에 대한 로깅이 기본적으로 비활성화됨을 의미합니다.                                                                                                                                           | `off`                   |
| `status_error_log`  | Status API 요청 오류 로그의 경로. 이 로그의 세분성은 `log_level` 속성으로 조정됩니다.                                                                                                                                                                 | `logs/status_error.log` |
| `debug_access_log`  | Debug API 요청 액세스 로그의 경로. 기본값 `off`는 이 API에 대한 로깅이 기본적으로 비활성화됨을 의미합니다.                                                                                                                                            | `off`                   |
| `debug_error_log`   | Debug API 요청 오류 로그의 경로. 이 로그의 세분성은 `log_level` 속성으로 조정됩니다.                                                                                                                                                                  | `logs/debug_error.log`  |

## 보안 및 저장소 설정

| 설정     | 설명                                                                                                                                                                     | 기본값    |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------- |
| `vaults` | 이 노드가 로드해야 하는 vault의 쉼표로 구분된 목록. 기본적으로 모든 번들된 vault가 활성화됩니다. 지정된 이름은 Lua 네임스페이스에서 `kong.vaults.{name}.*`로 대체됩니다. | `bundled` |

## 추적 설정

| 설정                                  | 설명                                                                                                                              | 기본값 |
| ------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `opentelemetry_tracing`               | **사용 중단됨**: `tracing_instrumentations`를 사용하세요.                                                                         | `off`  |
| `tracing_instrumentations`            | 이 노드가 로드해야 하는 추적 계측의 쉼표로 구분된 목록. 기본적으로 계측이 활성화되지 않습니다.                                    | `off`  |
| `opentelemetry_tracing_sampling_rate` | **사용 중단됨**: `tracing_sampling_rate`를 사용하세요.                                                                            | `1.0`  |
| `tracing_sampling_rate`               | 추적 계측 샘플링 비율. 추적기는 샘플링 비율에 따라 모든 스팬의 고정 비율을 샘플링합니다. 예: 0.25는 모든 추적의 25%를 의미합니다. | `0.01` |

### tracing_instrumentations 유효한 값

- `off`: 계측을 활성화하지 않습니다.
- `request`: 요청 수준 계측만 활성화합니다.
- `all`: 다음 모든 계측을 활성화합니다.
- `db_query`: 데이터베이스 쿼리를 추적합니다.
- `dns_query`: DNS 쿼리를 추적합니다.
- `router`: 라우터 실행을 추적합니다 (라우터 재구성 포함).
- `http_client`: OpenResty HTTP 클라이언트 요청을 추적합니다.
- `balancer`: 밸런서 재시도를 추적합니다.
- `plugin_rewrite`: rewrite 단계로 플러그인 반복자 실행을 추적합니다.
- `plugin_access`: access 단계로 플러그인 반복자 실행을 추적합니다.
- `plugin_header_filter`: header_filter 단계로 플러그인 반복자 실행을 추적합니다.

**참고**: 현재 구현에서는 스트림 모드에서 추적 계측이 활성화되지 않습니다.

## 플러그인 설정

| 설정      | 설명                                                                                                                                  | 기본값    |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| `plugins` | 이 노드가 로드해야 하는 플러그인의 쉼표로 구분된 목록. 기본적으로 공식 배포판에 번들된 플러그인만 `bundled` 키워드를 통해 로드됩니다. | `bundled` |

### 플러그인 설정 예시

- `plugins = bundled,custom-auth,custom-log`: 번들된 플러그인과 두 개의 사용자 정의 플러그인을 포함합니다.
- `plugins = custom-auth,custom-log`: custom-auth와 custom-log 플러그인만 포함합니다.
- `plugins = off`: 플러그인을 포함하지 않습니다.

**중요 참고사항**:

- 플러그인을 로드하는 것은 기본적으로 활성화하는 것이 아니라, Kong이 소스 코드를 로드하고 관련 Admin API 엔드포인트를 통해 구성할 수 있도록 하는 것입니다.
- 이전에 구성된 일부 플러그인(즉, 데이터베이스에 행이 있음)이 이 목록에 지정되지 않으면 Kong이 시작되지 않습니다.
- 플러그인을 비활성화하기 전에 모든 인스턴스가 제거되었는지 확인하세요.

## 플러그인 서버 설정

| 설정                         | 설명                                                                                                                   | 기본값                       |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------- | ---------------------------- |
| `pluginserver_names`         | 플러그인 서버 프로세스의 이름에 대한 쉼표로 구분된 목록. 실제 이름은 로그 메시지와 실제 설정을 연결하는 데 사용됩니다. | -                            |
| `pluginserver_XXX_socket`    | 플러그인 서버에서 사용하는 유닉스 소켓의 경로.                                                                         | `<prefix>/<XXX>.socket`      |
| `pluginserver_XXX_start_cmd` | 플러그인 서버를 시작하는 전체 명령 (필요한 인수 포함).                                                                 | `/usr/local/bin/<XXX>`       |
| `pluginserver_XXX_query_cmd` | 플러그인 서버를 "쿼리"하는 전체 명령. 관리하는 플러그인의 덤프 정보가 포함된 JSON을 생성해야 합니다.                   | `/usr/local/bin/query_<XXX>` |

## 네트워크 설정

| 설정        | 설명                                                                                                                                                                                                                                                                                                                    | 기본값 |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `port_maps` | 이 구성 매개변수를 사용하면 Kong Gateway가 패킷이 전달되는 포트를 알 수 있습니다. 이는 Kong을 컨테이너화되거나 가상화된 환경에서 실행할 때 매우 일반적입니다. 예: `port_maps=80:8000, 443:8443`은 Kong에게 포트 80이 8000에 매핑되고 (포트 443이 8443에 매핑됨) 8000과 8443이 Kong이 수신 대기하는 포트임을 알려줍니다. | -      |

## 기타 설정

| 설정                      | 설명                                                                                                                                 | 기본값 |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ | ------ |
| `anonymous_reports`       | 오류 스택 추적과 같은 익명 사용 데이터를 전송하여 Kong을 개선하는 데 도움을 줍니다.                                                  | `on`   |
| `proxy_server`            | 인코딩된 URL로 정의된 프록시 서버. Kong은 구성 요소가 명시적으로 프록시를 사용하도록 구성된 경우에만 이 옵션을 사용합니다.           | -      |
| `proxy_server_ssl_verify` | `proxy_server`가 HTTPS인 경우 서버 인증서 검증을 토글합니다. 인증 기관을 지정하려면 `lua_ssl_trusted_certificate` 설정을 참조하세요. | `off`  |

## 오류 템플릿 설정

| 설정                   | 설명                                                                                                                                                                                                    | 기본값 |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `error_template_html`  | 기본 HTML Kong 오류 템플릿을 재정의할 사용자 정의 HTML 오류 템플릿의 경로. 템플릿은 최대 두 개의 %s 자리 표시자를 포함할 수 있습니다. 첫 번째는 오류 메시지로 확장되고, 두 번째는 요청 ID로 확장됩니다. | -      |
| `error_template_json`  | 기본 JSON Kong 오류 템플릿을 재정의할 사용자 정의 JSON 오류 템플릿의 경로.                                                                                                                              | -      |
| `error_template_xml`   | 기본 XML Kong 오류 템플릿을 재정의할 사용자 정의 XML 오류 템플릿의 경로.                                                                                                                                | -      |
| `error_template_plain` | 기본 일반 Kong 오류 템플릿을 재정의할 사용자 정의 일반 오류 템플릿의 경로.                                                                                                                              | -      |

### 오류 템플릿 예시

```html
<html>
  <body>
    <h1>My custom error template</h1>
    <p>error: %s</p>
    <p>request_id: %s</p>
  </body>
</html>
```

## 고급 설정

| 설정                          | 설명                                                                                                                                                                                                                                                                                                                  | 기본값 | 최소 버전 |
| ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | --------- |
| `dedicated_config_processing` | 구성 처리를 위한 특별한 워커 프로세스를 활성화하거나 비활성화합니다. 이 프로세스는 메모리 사용량을 약간 증가시키지만 CP/DP 연결 처리와 같은 일부 백그라운드 작업을 이러한 백그라운드 작업을 처리하는 데 특화된 추가 워커 프로세스로 이동하여 지연 시간을 줄일 수 있습니다. 현재 이는 데이터 평면에만 영향을 미칩니다. | `on`   | 3.5       |
